import yfinance as yf
from forex_python.converter import CurrencyCodes
import matplotlib.pyplot as plt

stock = input("Enter the stock symbol: ").upper()

ticker = yf.Ticker(stock).info

def stockinfo():

    try:

        market_price = ticker['currentPrice']
        previous_day_close = ticker['regularMarketPreviousClose']

        company_name = ticker['longName']
        sector = ticker['sector']
        #market_cap = ticker['marketCap']

        currency_name = ticker['currency']
        currency_codes = CurrencyCodes()
        currency_symbol = currency_codes.get_symbol(currency_name)
    
        print(f'Ticker: {stock}')
        print('Company Name:', company_name)
        print('Sector:', sector)
        #print('Market Cap:', market_cap) #have to do conversion..
        print('Current Market Price:', f"{currency_symbol}{market_price:,.2f}")  #Formatting the stock's price with its currency symbol
        print('Previous Day Close Price:', f"{currency_symbol}{previous_day_close:,.2f}")

    except KeyError:

        print("Invalid stock symbol or data not available.")

stockinfo()


#Plotting the closing price history (5 years, interval:1 month) of the stock:
""" price_history = yf.Ticker(stock).history(period='5y', interval='1mo', actions=False)

close_prices = price_history['Close'] 

plt.plot(close_prices)
plt.title(f"{stock} Price History")
plt.xlabel("Date")
plt.ylabel("Closing Price")
plt.show() """



